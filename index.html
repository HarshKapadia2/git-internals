<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Harsh Kapadia">
<link rel="icon" type="image/x-icon" href="./static/img/favicon.ico">
<title>Git Internals</title>
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="./static/highlight/styles/github-light-dark.min.css">
<meta
	name="keywords"
	content="git internals, git, git_internals, git_basics, harsh kapadia"
/>
<meta name="description" content="Exploring the internals of Git" />
<meta name="theme-color" content="#000000" />
<meta property="og:site_name" content="Git Internals" />
<meta property="og:title" content="Git Internals" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Exploring the internals of Git" />
<meta property="og:url" content="https://git.harshkapadia.me" />
<meta
	property="og:image"
	content="https://git.harshkapadia.me/static/img/og-img.png"
/>
<meta property="og:image:width" content="1800" />
<meta property="og:image:height" content="900" />
<meta property="twitter:card" content="summary_large_image" />
<meta
	property="twitter:image"
	content="https://git.harshkapadia.me/static/img/og-img.png"
/>

<script defer src="static/js/script.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=PT+Mono&family=Montserrat&display=swap"
	rel="stylesheet"
/>

<link rel="stylesheet" href="static/css/style.css" />

<link
	rel="apple-touch-icon"
	href="https://git.harshkapadia.me/static/img/icon-192.png"
/>

<link rel="manifest" href="manifest.webmanifest" />
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Git Internals</h1>
<div class="details">
<span id="author" class="author">Harsh Kapadia</span><br>
<span id="revnumber">version 1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about">About</a></li>
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_the_git_directory">The <code>.git</code> Directory</a>
<ul class="sectlevel2">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_the_git_directory_contents">The <code>.git</code> Directory Contents</a></li>
<li><a href="#_the_index_file">The <code>index</code> File</a></li>
<li><a href="#_the_head_file">The <code>HEAD</code> File</a></li>
<li><a href="#_the_refs_directory">The <code>refs</code> Directory</a></li>
<li><a href="#_the_packed_refs_file">The <code>packed-refs</code> File</a></li>
<li><a href="#_the_logs_directory">The <code>logs</code> Directory</a></li>
<li><a href="#_the_fetch_head_file">The <code>FETCH_HEAD</code> file</a></li>
<li><a href="#_the_commit_editmsg_file">The <code>COMMIT_EDITMSG</code> File</a></li>
<li><a href="#_the_objects_directory">The <code>objects</code> Directory</a></li>
<li><a href="#_the_info_directory">The <code>info</code> Directory</a></li>
<li><a href="#_the_config_file">The <code>config</code> File</a></li>
<li><a href="#_the_addp_hunk_edit_diff_file">The <code>addp-hunk-edit.diff</code> File</a></li>
<li><a href="#_the_orig_head_file">The <code>ORIG_HEAD</code> File</a></li>
<li><a href="#_the_description_file">The <code>description</code> File</a></li>
</ul>
</li>
<li><a href="#_git_objects">Git Objects</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">Introduction</a></li>
<li><a href="#_the_blob_object">The <code>blob</code> Object</a></li>
<li><a href="#_the_commit_object">The <code>commit</code> Object</a></li>
<li><a href="#_the_tree_object">The <code>tree</code> Object</a></li>
<li><a href="#_parent_commits">Parent Commits</a></li>
<li><a href="#_creating_directories">Creating Directories</a></li>
<li><a href="#_renaming_files">Renaming Files</a></li>
<li><a href="#_modifying_large_files">Modifying Large Files</a></li>
<li><a href="#_the_pack_directory">The <code>pack</code> Directory</a></li>
<li><a href="#_empty_commits">Empty Commits</a></li>
</ul>
</li>
<li><a href="#_resources">Resources</a>
<ul class="sectlevel2">
<li><a href="#_talks">Talks</a></li>
<li><a href="#_tools">Tools</a></li>
<li><a href="#_articles">Articles</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_about"><a class="anchor" href="#_about"></a>About</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This PWA is about the internals of <a href="https://harshkapadia2.github.io/git_basics/#_git" target="_blank" rel="noopener">Git</a>.</p>
</div>
<div class="paragraph">
<p>It is Open Sourced at <a href="https://github.com/HarshKapadia2/git_internals" target="_blank" rel="noopener">github.com/HarshKapadia2/git_internals</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
The content of this site is covered through talks as well. Feel free to <a href="https://talks.harshkapadia.me/git_internals" target="_blank" rel="noopener">watch the Git Internals talks</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before going through this PWA, it would be beneficial to know the basics of Git.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Watch the <a href="https://talks.harshkapadia.me/git_basics" target="_blank" rel="noopener">Git Basics talks</a>.</p>
</li>
<li>
<p>Go through the <a href="https://harshkapadia2.github.io/git_basics" target="_blank" rel="noopener">git_basics</a> PWA.</p>
</li>
<li>
<p><a href="https://harshkapadia2.github.io/git_basics/#_resources" target="_blank" rel="noopener">Misc resources</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_git_directory"><a class="anchor" href="#_the_git_directory"></a>The <code>.git</code> Directory</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h3>
<div class="paragraph">
<p>On executing the <a href="https://harshkapadia2.github.io/git_basics/#_git_init" target="_blank" rel="noopener"><code>git init</code> command</a> in a directory, Git creates a hidden <code>.git</code> directory in that directory. The <code>.git</code> directory contains all the project history data on which Git can perform its version control functions. It also contains files to configure the way Git handles things for that particular <a href="https://harshkapadia2.github.io/git_basics/#_repository" target="_blank" rel="noopener">repository</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_git_directory_contents"><a class="anchor" href="#_the_git_directory_contents"></a>The <code>.git</code> Directory Contents</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───addp-hunk-edit.diff
├───COMMIT_EDITMSG
├───config
├───description
├───FETCH_HEAD
├───HEAD
├───hooks
│   └───&lt;*.sample&gt;
├───index
├───info
│   └───exclude
├───lfs
│   ├───cache
│   │   └───locks
│   │       └───refs
│   │           └───heads
│   │               └───&lt;branch_names&gt;
│   │                   └───verifiable
│   ├───objects
│   │   └───&lt;first_2_SHA-256_characters&gt;
│   │       └───&lt;next_2_SHA-256_characters&gt;
│   │           └───&lt;entire_64_character_SHA-256_hash&gt;
│   └───tmp
├───logs
│   ├───HEAD
│   └───refs
│       ├───heads
│       │   └───&lt;branch_names&gt;
│       ├───remotes
│       │   └───&lt;remote_aliases&gt;
│       │       └───&lt;branch_names&gt;
│       └───stash
├───MERGE_HEAD
├───MERGE_MODE
├───MERGE_MSG
├───objects
│   ├───&lt;first_2_SHA-1_characters&gt;
│   │   └───&lt;remaining_38_SHA-1_characters&gt;
│   ├───info
│   │   ├───commit-graph
│   │   └───packs
│   └───pack
│       ├───multi-pack-index
│       ├───&lt;*.idx&gt;
│       └───&lt;*.pack&gt;
├───ORIG_HEAD
├───packed-refs
├───rebase-merge
│   ├───git-rebase-todo
│   ├───git-rebase-todo.backup
│   ├───head-name
│   ├───interactive
│   ├───no-reschedule-failed-exec
│   ├───onto
│   └───orig-head
└───refs
    ├───heads
    │   └───&lt;branch_names&gt;
    ├───remotes
    │   └───&lt;remote_aliases&gt;
    │       └───&lt;branch_names&gt;
    ├───stash
    └───tags
        └───&lt;tag_names&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_index_file"><a class="anchor" href="#_the_index_file"></a>The <code>index</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>This file contains the details of <a href="https://harshkapadia2.github.io/git_basics/#_added_files" target="_blank" rel="noopener">staged (added) files</a> and is the staging area of the repository.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The words 'index', 'stage' and 'cache' are the same in Git and are used interchangeably.</p>
</li>
<li>
<p>Do not confuse this <code>index</code> file with <a href="#_the_pack_directory">the <code>.idx</code> Index files in <code>.git/objects/pack</code></a>. They are not related.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>It is created when files are added for the first time and is updated every time the <a href="https://harshkapadia2.github.io/git_basics/#_git_add" target="_blank" rel="noopener"><code>git add</code> command</a> is executed.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/index-explained.png" alt="Index file explained" width="400" height="400">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>It is a binary file and just printing contents using <code>cat .git/index</code> will result in gibberish. Its contents can be accessed using the <code>git ls-files --stage</code> [plumbing command].</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/git-ls-files.png" alt="'git ls-files --stage' command" width="600" height="600">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>From the image above</p>
<div class="ulist">
<ul>
<li>
<p><code>100644</code> is the mode of the file. It is an octal number.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plaintext hljs" data-lang="plaintext">Octal: 100644
Binary: 001000 000 110100100</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The first six binary bits indicate the object type.</p>
<div class="ulist">
<ul>
<li>
<p><code>001000</code> indicates a regular file. (As seen in this case.)</p>
</li>
<li>
<p><code>001010</code> indicates a <a href="https://tdongsi.github.io/blog/2016/02/20/symlinks-in-git" target="_blank" rel="noopener">symlink (symbolic link)</a>.</p>
</li>
<li>
<p><code>001110</code> indicates a <a href="https://www.oreilly.com/library/view/version-control-with/9780596158187/ch15s04.html#:~:text=gitlink" target="_blank" rel="noopener">gitlink</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The next three binary bits (<code>000</code>) are unused.</p>
</li>
<li>
<p>The last nine binary bits (<code>110100100</code>) indicate <a href="https://harshkapadia2.github.io/cli/terminal.html#changing-permissions" target="_blank" rel="noopener">Unix file permissions</a>.</p>
<div class="ulist">
<ul>
<li>
<p><code>644</code> and <code>755</code> are valid for regular files.</p>
</li>
<li>
<p>Symlinks and gitlinks have the value <code>0</code> in this field.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The next 40 character hexadecimal string is the <a href="https://harshkapadia2.github.io/git_basics/#_sha1" target="_blank" rel="noopener">SHA-1 hash</a> of the file.</p>
</li>
<li>
<p>The next number is a stage number/slot, which is useful during merge conflict handling.</p>
<div class="ulist">
<ul>
<li>
<p><code>0</code> indicates a normal un-conflicted file.</p>
</li>
<li>
<p><code>1</code> indicates the base, i.e., the original version of the file.</p>
</li>
<li>
<p><code>2</code> indicates the 'ours' version, i.e., the HEAD version with both changes.</p>
</li>
<li>
<p><code>3</code> indicates the 'theirs' version, i.e., the file with the incoming changes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The last string is the name of the file being referred to.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Further reading on <code>index</code> files can be found in the <a href="#_the_staging_index_file">Resources section</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_head_file"><a class="anchor" href="#_the_head_file"></a>The <code>HEAD</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>It is used to refer to the latest commit in the current branch.</p>
</li>
<li>
<p>Usually it does not contain a commit <a href="https://harshkapadia2.github.io/git_basics/#_sha1" target="_blank" rel="noopener">SHA-1</a>, but contains the path to a file (of the name of the current branch) in the <a href="#_the_refs_directory" target="_blank" rel="noopener">refs directory</a> which stores the last commit&#8217;s SHA-1 hash in that branch.</p>
</li>
<li>
<p>It contains a commit&#8217;s SHA-1 hash when <a href="https://harshkapadia2.github.io/git_basics/#_commits_sha" target="_blank" rel="noopener">a specific commit or tag is checked out</a>. (<a href="https://harshkapadia2.github.io/git_basics/#_detached_head" target="_blank" rel="noopener">Detached HEAD</a> state.)</p>
</li>
<li>
<p><a href="https://harshkapadia2.github.io/git_basics/#_head" target="_blank" rel="noopener">More on the <code>HEAD</code> file.</a></p>
</li>
<li>
<p>Eg:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># in the 'main' branch
$ cat .git/HEAD
ref: refs/heads/main
$ git switch test_branch
Switched to branch 'test_branch'
$ cat .git/HEAD
ref: refs/heads/test_branch</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_refs_directory"><a class="anchor" href="#_the_refs_directory"></a>The <code>refs</code> Directory</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───...
└───refs
    ├───heads
    │   └───&lt;branch_name(s)&gt;
    ├───remotes
    │   └───&lt;remote_alias(es)&gt;
    │       └───&lt;branch_name(s)&gt;
    ├───stash
    └───tags
        └───&lt;tag_name(s)&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>This directory holds the reference to the latest commit in every local branch and fetched remote branch in the form of the SHA-1 hash of the commit.</p>
</li>
<li>
<p>It also stores the SHA-1 hash of the commit which has been [tagged].</p>
</li>
<li>
<p>The <a href="#_the_head_file"><code>HEAD</code> file</a> references a file (of the name of <a href="https://harshkapadia2.github.io/git_basics/#_new_branch_name" target="_blank" rel="noopener">the branch that is currently checked out</a>) from the <code>heads</code> directory in this (<code>refs</code>) directory.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Do not confuse the <code>.git/refs</code> directory and the <a href="#_the_logs_directory"><code>.git/logs/refs</code> directory</a>. They have different uses.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_packed_refs_file"><a class="anchor" href="#_the_packed_refs_file"></a>The <code>packed-refs</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>One file is created per branch and tag in the <a href="#_the_refs_directory"><code>refs</code> directory</a>.</p>
</li>
<li>
<p>In a repository with a lot of branches and tags, there are a lot of references (refs) and most of them are not actively used/changed.</p>
</li>
<li>
<p>These refs occupy a lot of storage space and cause performance issues.</p>
</li>
<li>
<p>The <code>git pack-refs</code> command is used to solve this problem. It stores all the refs in a single file called <code>packed-refs</code>. The <code>git gc</code> command also does this.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-packed-refs.png" alt="Print the packed-ref file" width="600" height="600">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If a ref is missing from the usual <code>refs</code> directory after packing, it is looked up in this file.</p>
</li>
<li>
<p>Subsequent updates (new commit or a pull or push with changes) to a branch whose ref is packed creates a new file with the name of the branch in the <code>refs</code> directory as usual, but does not update the hash of that branch in the <code>packed-refs</code> file with the latest one. (A new <code>packed-refs</code> file will have to be generated for that.)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_logs_directory"><a class="anchor" href="#_the_logs_directory"></a>The <code>logs</code> Directory</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───...
└───logs
    ├───HEAD
    └───refs
        ├───heads
        │   └───&lt;branch_name(s)&gt;
        ├───remotes
        │   └───&lt;remote_alias(es)&gt;
        │       └───&lt;branch_name(s)&gt;
        └───stash</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Contains the history of all commits in order.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-logs.png" alt="Print a branch&#8217;s log file" width="1000" height="1000">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Every row consists of the parent commit&#8217;s <a href="https://harshkapadia2.github.io/git_basics/<mark>_sha1" target="_blank" rel="noopener">SHA-1 hash</a>, the current commit&#8217;s SHA-1 hash, the committer&#8217;s name and e-mail, the <a href="https://www.epochconverter.com/</mark>:~:text=What%20is%20epoch%20time" target="_blank" rel="noopener">Unix Epoch Time</a> of the commit, the time zone, the type of action and message in order.</p>
</li>
<li>
<p>There are logs for every branch in the local Git repository and for the fetched branches from the remote Git repository/repositories (if any).</p>
</li>
<li>
<p>Inside the <code>logs</code> directory</p>
<div class="ulist">
<ul>
<li>
<p>The <code>HEAD</code> file stores information about all the commands executed by the user, such as branch switches, commits, rebases, etc.</p>
</li>
<li>
<p>The files in the refs directory only include branch specific operations and history, such as commits, pulls, resets, rebases, etc.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Do not confuse the <code>.git/logs/refs</code> directory and the <a href="#_the_refs_directory"><code>.git/refs</code> directory</a>. They have different uses.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_fetch_head_file"><a class="anchor" href="#_the_fetch_head_file"></a>The <code>FETCH_HEAD</code> file</h3>
<div class="ulist">
<ul>
<li>
<p>It contains the latest commits of the fetched remote branch(es).</p>
</li>
<li>
<p>It corresponds to the branch which was</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://harshkapadia2.github.io/git_basics/#_new_branch_name" target="_blank" rel="noopener">Checked out</a> when last fetched.

<br />
<br />

<span class="image"><img loading="lazy" src="./static/img/cat-FETCH_HEAD-1.png" alt="The contents of the FETCH_HEAD file" width="800" height="800"></span></p>
<div class="ulist">
<ul>
<li>
<p>From the image above, only one branch is displayed without the <code>not-for-merge</code> text. The odd one out (the main branch in this case) is the branch which was checked out while fetching.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Explicitly mentioned using the <a href="https://harshkapadia2.github.io/git_basics/#_git_fetch" target="_blank" rel="noopener"><code>git fetch &lt;remote_repo_alias&gt; &lt;branch_name&gt;</code> command</a>.

<br />
<br />

<span class="image"><img loading="lazy" src="./static/img/cat-FETCH_HEAD-2.png" alt="The contents of the FETCH_HEAD file" width="800" height="800"></span></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_commit_editmsg_file"><a class="anchor" href="#_the_commit_editmsg_file"></a>The <code>COMMIT_EDITMSG</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>The commit message is written in this file.</p>
</li>
<li>
<p>This file is opened in an editor on executing the <a href="https://harshkapadia2.github.io/git_basics/#_git_commit" target="_blank" rel="noopener"><code>git commit</code> command</a>.</p>
</li>
<li>
<p>It contains the output of the <a href="https://harshkapadia2.github.io/git_basics/<mark>_git_status" target="_blank" rel="noopener"><code>git status</code> command</a> commented out using the <code></mark></code> character.</p>
</li>
<li>
<p>If there has been a commit before, then this file will show the last commit message along with the <code>git status</code> output just before that commit.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_objects_directory"><a class="anchor" href="#_the_objects_directory"></a>The <code>objects</code> Directory</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───...
└───objects
    ├───&lt;first_2_SHA-1_characters&gt;
    │   └───&lt;remaining_38_SHA-1_characters&gt;
    ├───info
    │   ├───commit-graph
    │   └───packs
    └───pack
        ├───multi-pack-index
        ├───&lt;*.idx&gt;
        └───&lt;*.pack&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The most important directory in the <code>.git</code> directory.</p>
</li>
<li>
<p>It houses the data (SHA-1 hashes) of all the <a href="#_git_objects">commit, tree and blob objects</a> in the repository.</p>
</li>
<li>
<p>To decrease access time, objects are placed in buckets (directories), with the first two characters of their SHA-1 hash as the name of the bucket. The remaining 38 characters are used to name the object&#8217;s file.</p>
</li>
<li>
<p><a href="#_the_pack_directory">More on the <code>pack</code> directory.</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Do not confuse this directory (<code>.git/objects/info</code>) with the <a href="_the_info_directory"><code>.git/info</code> directory</a>. They have different uses.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_info_directory"><a class="anchor" href="#_the_info_directory"></a>The <code>info</code> Directory</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───...
└───info
    └───exclude</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>It contains the <code>exclude</code> file which behaves like the <a href="https://harshkapadia2.github.io/git_basics/#_gitignore_file" target="_blank" rel="noopener"><code>.gitignore</code> file</a>, but is used to ignore files locally without modifying <code>.gitignore</code>.</p>
</li>
<li>
<p><a href="https://harshkapadia2.github.io/git_basics/#_ignore_files_locally_without_modifying_gitignore" target="_blank" rel="noopener">More on the <code>exclude</code> file.</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Do not confuse this directory (<code>.git/info</code>) with the <a href="#_the_objects_directory"><code>.git/objects/info</code> directory</a>. They have different uses.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_config_file"><a class="anchor" href="#_the_config_file"></a>The <code>config</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>This file contains the local Git repository configuration.</p>
</li>
<li>
<p>It can be modified using the <a href="https://harshkapadia2.github.io/git_basics/#_git_config" target="_blank" rel="noopener"><code>git config --local</code> command</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_addp_hunk_edit_diff_file"><a class="anchor" href="#_the_addp_hunk_edit_diff_file"></a>The <code>addp-hunk-edit.diff</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>Created when the <code>e</code> (edit) option is chosen in the <a href="https://harshkapadia2.github.io/git_basics/#_p_or_patch" target="_blank" rel="noopener"><code>git add --patch</code> command</a>.</p>
</li>
<li>
<p>Enables the manual edit of a hunk of a file to be <a href="https://harshkapadia2.github.io/git_basics/#_added_files" target="_blank" rel="noopener">staged</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_orig_head_file"><a class="anchor" href="#_the_orig_head_file"></a>The <code>ORIG_HEAD</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>It contains the SHA-1 hash of a commit.</p>
</li>
<li>
<p>It is the previous state of the HEAD, but not necessarily the immediate previous state.</p>
</li>
<li>
<p>It is set by certain commands which have destructive/dangerous behaviour, so it usually points to the latest commit with a destructive change.</p>
</li>
<li>
<p>It is less useful now because of the [<code>git reflog</code> command] which makes reverting/resetting to a particular commit easier.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_description_file"><a class="anchor" href="#_the_description_file"></a>The <code>description</code> File</h3>
<div class="ulist">
<ul>
<li>
<p>This is the description of the repository.</p>
</li>
<li>
<p>This file is used by <a href="https://git-scm.com/book/en/v2/Git-on-the-Server-GitWeb" target="_blank" rel="noopener">GitWeb</a>, which hardly anyone uses today, so can be left alone.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git_objects"><a class="anchor" href="#_git_objects"></a>Git Objects</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a>Introduction</h3>
<div class="paragraph">
<p>Git has two data structures, a mutable <a href="#_the_index_file">index</a> that caches information about the working directory and the next revision to be committed, and an immutable, append-only object database (<a href="https://harshkapadia2.github.io/git_basics/#_repository" target="_blank" rel="noopener">repository</a>) containing four types of objects</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Blob Object</p>
</li>
<li>
<p>Commit Object</p>
</li>
<li>
<p>Tree Object</p>
</li>
<li>
<p>Tag Object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Git carries out its version control using these objects to store data and the internal working of Git can be understood by understanding these objects.</p>
</div>
<div class="paragraph">
<p>Some part of the internal working of Git will be explored through an example in this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Feel free to follow along and create the graphs below using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run <code>git init</code> to initialize an empty <a href="https://harshkapadia2.github.io/git_basics/#_repository" target="_blank" rel="noopener">repository</a> in the <code>inside_git</code> directory (root directory). A hidden directory <code>.git</code> is created in this root folder.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/git-init.jpg" alt="git init" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>The command <code>du -c</code> is used to list the sub-directories of <code>inside_git</code> and their sizes on disk (in kbs).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/du-c-1.jpg" alt="du -c" width="600" height="600">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_blob_object"><a class="anchor" href="#_the_blob_object"></a>The <code>blob</code> Object</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
A Blob Object stores the contents of a file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a new file in the root folder.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/touch-master_file_1.jpg" alt="Create new file" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Now the working tree (root directory) contains the <code>.git</code> directory and the new file <code>master_file_1.txt</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/ls-a-1.jpg" alt="Master File" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Add the file to the <a href="https://harshkapadia2.github.io/git_basics/#_staging_staging_areaindex" target="_blank" rel="noopener">staging area</a> using <a href="https://harshkapadia2.github.io/git_basics/#_period" target="_blank" rel="noopener"><code>git add .</code></a> and run <code>du -c</code> once again.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/du-c-2.jpg" alt="Stage file" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Note that a new directory <code>e6</code> has been added to <code>.git/objects</code>.</p>
</div>
<div class="paragraph">
<p>Use the <code>dir</code> (or <code>ls</code>) command to find out which file is present in the directory <code>.git/objects/e6</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/dir-1.jpg" alt="Create new directory" width="600" height="600">
</div>
</div>
<div class="paragraph word-break-all">
<p>The file name <code>9de29bb2d1d6434b8b29ae775ad8c2e48c5391</code> is 38 characters long. On appending it to the folder name (<code>e6</code>), it becomes a 40 character string <code>e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</code>. This is a <a href="https://harshkapadia2.github.io/git_basics/#_SHA-1" target="_blank" rel="noopener">SHA-1 hash</a>. Git hashes the content of the file (and some more data) using the SHA-1 algorithm to produce a 40 character hexadecimal string. Every <a href="https://harshkapadia2.github.io/git_basics/#_git_add" target="_blank" rel="noopener">stage</a>, [commit] and [tag] produces its own unique SHA-1 hash(es). (Being a 40 character string, hash collisions are VERY rare.) The first two characters of the hash are used for bucketing the hashes into folders, to decrease access time. To make things easy, <strong>Git sometimes uses just 4 to 8 characters of an object&#8217;s hash to refer to it.</strong></p>
</div>
<div class="paragraph">
<p>As mentioned in the previous paragraph, Git hashes the contents of the file and other details to create a 40 character SHA-1 hash. To verify that, some content needs to be added to the file. The file will then have to be added again. (This will produce another hash.)</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/add-to-master_file_1-1.jpg" alt="Add to Master file" width="600" height="600">
</div>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/edit-master_file_1-1.jpg" alt="Edit master file" width="600" height="600">
</div>
</div>
<div class="paragraph word-break-all">
<p>From the last command in the image above, it can be inferred that a new hash <code>1a3851c172420a2198cf8ca6f2b776589d955cc5</code> was generated. Check its contents using the <code>cat</code> command.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-1.jpg" alt="Check contents" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>The output is gibberish because Git compresses file contents (and some additional data) with the <a href="https://www.zlib.net" target="_blank" rel="noopener">zlib</a> library and then stores it in the file. So to make sense of the gibberish, the content of the file needs to be de-compressed.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/decompress-file.png" alt="Decompress" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p><code>blob 16\0Git is amazing!\n</code> is the content of the hashed file. (<code>\0</code> and <code>\n</code> are not seen. Explained in the points below.)</p>
</div>
<div class="paragraph">
<p>Breaking it down</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>blob</code></strong> is the object type of the file. It is an abbreviation for 'Binary Large OBject'. These objects (files) store the content of the files.</p>
</li>
<li>
<p><code>16</code> is the file size (length). <code>Git is amazing!</code> consists of 15 characters, but the <a href="https://harshkapadia2.github.io/cli/terminal.html#:~:text=It%20can%20be%20used%20to%20add%20text%20to%20a%20file%20using%20the%20output%20redirection%20operator"><code>echo</code> command</a> adds a new line (line feed) character (<code>\n</code>) at the end of the text, making the length 16.</p>
</li>
<li>
<p>Just like the <code>\n</code> character which cannot be seen in the output, there is a NULL character (<code>\0</code>) between the length and file content.</p>
</li>
<li>
<p><code>Git is amazing!\n</code> is the file content. (The <code>\n</code> is not visible.)</p>
</li>
</ul>
</div>
<div class="admonitionblock note word-break-all">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>If <code>blob 16\0Git is amazing!\n</code> is hashed using SHA-1, the same hash (<code>1a3851c172420a2198cf8ca6f2b776589d955cc5</code>) will be generated!</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/sha1sum.png" alt="Generating hash for the string" width="600" height="600">
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>So, Git generates the hash of the file using the string <code>&lt;object_type&gt; &lt;content_length&gt;\0&lt;file_content&gt;</code> and stores that string in the file after compressing it.</strong> (The name of the file is the last 38 characters of the 40 character hash that was generated. The first two characters are used for bucketing.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Blob Objects do not store the diff/delta of files. They store the entire contents of files.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>The process of finding the contents of the file using <code>cat</code> is pretty cumbersome. It is a better idea to use the <code>git cat-file</code> [plumbing command] provided by Git.</p>
</div>
<div class="paragraph">
<p>Variations of the <code>git cat-file</code> command that will be used</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>git cat-file -p &lt;hash&gt;</code> (-p = pretty print) to display file data.</p>
</li>
<li>
<p><code>git cat-file -t &lt;hash&gt;</code> (-t = type) to display file type (blob, commit, tree or tag).</p>
</li>
<li>
<p><code>git cat-file -s &lt;hash&gt;</code> (-s = size) to display the file size (length).</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_commit_object"><a class="anchor" href="#_the_commit_object"></a>The <code>commit</code> Object</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
A commit object links tree objects together into a history. It contains the name of a tree object (of the top-level source directory), a timestamp, a log message, and the names of zero or more parent commit objects.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Commit <code>master_file_1.txt</code> and then run <code>du -c</code> again.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/commit-master_file_1-1.jpg" alt="Commit master file" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>From the above image it can be noticed that two new directories <code>.git/objects/1b</code> and <code>.git/objects/d5</code> were created. Also, after committing the file, Git printed the first seven characters of the SHA-1 hash for that commit in the output.</p>
</div>
<div class="paragraph">
<p>Using the seven characters of the commit hash in the output, check the file type using the <code>git cat-file -t</code> command.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-t-1.jpg" alt="Plumbing commands" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>So the file type is <code>commit</code>, inferring that it is a file generated through a commit.</p>
</div>
<div class="paragraph">
<p>Print the contents of the commit object (file) using the <code>git cat-file -p</code> command.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-1.jpg" alt="Commit" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Commit object content</p>
</div>
<div class="ulist word-break-all">
<ul>
<li>
<p><code>tree 1b2190cdc2801ec3df6505dc351dee878ac7f2fc</code> is the other SHA-1 hash that was generated (remember that two directories were generated in <code>.git/objects</code> on committing the file), of the type <code>tree</code>. The tree is the [snapshot] of the current state of the repository.</p>
</li>
<li>
<p><a href="#_parent_commits">Parent commit&#8217;s SHA-1 hash</a> (Not present here. Explained below.)</p>
</li>
<li>
<p>The next line has the details of the author (the one who wrote the code):</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>e-mail ID</p>
</li>
<li>
<p>Timestamp</p>
</li>
</ul>
</div>
</li>
<li>
<p>The next line has the details of the committer (the one who committed the code):</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>e-mail ID</p>
</li>
<li>
<p>Timestamp</p>
</li>
</ul>
</div>
</li>
<li>
<p>Commit message</p>
</li>
<li>
<p>Commit description (If provided. Not present here.)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_tree_object"><a class="anchor" href="#_the_tree_object"></a>The <code>tree</code> Object</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
A tree object is the equivalent of a (sub)directory: it contains a list of filenames, each with some type bits and the name of a blob or tree object that is that file, symbolic link, or directory&#8217;s contents. This object describes a snapshot of the source tree.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Check the contents of the tree file listed in the commit object (file).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-2.jpg" alt="Check contents" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p><strong>The tree file has entries of the files &amp; directories in the snapshot (current state) of the local repository.</strong> The format of each line is the same.</p>
</div>
<div class="paragraph">
<p>Tree object content format</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>100644</code> is the mode of the file. It is an octal number.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plaintext hljs" data-lang="plaintext">Octal: 100644
Binary: 001000 000 110100100</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The first six binary bits indicate the object type.</p>
<div class="ulist">
<ul>
<li>
<p><code>001000</code> indicates a regular file. (As seen in this case.)</p>
</li>
<li>
<p><code>001010</code> indicates a <a href="https://tdongsi.github.io/blog/2016/02/20/symlinks-in-git" target="_blank" rel="noopener">symlink (symbolic link)</a>.</p>
</li>
<li>
<p><code>001110</code> indicates a <a href="https://www.oreilly.com/library/view/version-control-with/9780596158187/ch15s04.html#:~:text=gitlink" target="_blank" rel="noopener">gitlink</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The next three binary bits (<code>000</code>) are unused.</p>
</li>
<li>
<p>The last nine binary bits (<code>110100100</code>) indicate <a href="https://harshkapadia2.github.io/cli/terminal.html#changing-permissions" target="_blank" rel="noopener">Unix file permissions</a>.</p>
<div class="ulist">
<ul>
<li>
<p><code>644</code> and <code>755</code> are valid for regular files.</p>
</li>
<li>
<p>Symlinks and gitlinks have the value <code>0</code> in this field.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>blob</code> is the object type. (<a href="#_creating_directories">It can be a <code>tree</code> object as well.</a> Explained below.)</p>
</li>
</ul>
</div>
<div class="ulist word-break-all">
<ul>
<li>
<p><code>1a3851c172420a2198cf8ca6f2b776589d955cc5</code> is the SHA-1 hash of the file.</p>
</li>
<li>
<p>Name of the file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>So, each commit object points to a tree object and each tree object points to a set of blobs and/or trees, which correspond respectively to files and subdirectories.</strong></p>
</div>
<div class="paragraph">
<p>The connections between the commit, tree and blob files till now. (<a href="#_the_head_file"><code>HEAD</code></a> is just a pointer to the latest commit.)</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/connection-graph-1.png" alt="Connection graph" width="600" height="600">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The blob <code>e69de</code> has been modified to blob <code>1a385</code> and so is not connected to the tree <code>1b219</code>. Only the latest blob of every added file is connected to the new tree object when a commit is made.</p>
</li>
<li>
<p>This graph can be created using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_parent_commits"><a class="anchor" href="#_parent_commits"></a>Parent Commits</h3>
<div class="paragraph">
<p>Create another file (<code>master_file_2.txt</code>), add it and commit it.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/touch-master_file_2.jpg" alt="Create master file" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Check the contents of the commit file (using part of the hash <code>8282663</code> as seen in the above image).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-3.jpg" alt="Create another master file" width="600" height="600">
</div>
</div>
<div id="_dag" class="paragraph word-break-all">
<p>A new line <code>parent d5b8f77ce1dc1a37b29885026055c8656c3e0b65</code> is seen. Remember, this is the hash of the previous commit. <strong>Git is thus creating a graph. A Directed Acyclic Graph to be precise.</strong> (Check image below.)</p>
</div>
<div class="paragraph">
<p>Also, the <a href="#_the_head_file"><code>HEAD</code></a> will now automatically point to this (latest - <code>82826</code>) commit rather than the parent (previous - <code>d5b8f</code>) commit as it was doing before. To verify, check where the <code>HEAD</code> is pointing.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/head-1.jpg" alt="HEAD" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>It is pointing to the latest commit (<code>82826</code>).</p>
</div>
<div class="paragraph">
<p>Now check the contents of the tree object of the latest commit.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-4.jpg" alt="Contents of tree" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>From the commit object, tree object and HEAD position, the connection graph looks as follows</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/connection-graph-2.png" alt="Connection graph" width="600" height="600">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
This graph can be created using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_directories"><a class="anchor" href="#_creating_directories"></a>Creating Directories</h3>
<div class="paragraph">
<p>Create a new file (<code>master_dir_1_file_3.txt</code>) inside a directory (<code>dir_1</code>), add it, commit it and look at the contents of the commit file.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/mkdir_1.jpg" alt="Create new file in directory" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>The commit file has the <a href="#_the_commit_object:~:text=Commit%20object%20content">same format as before</a>.</p>
</div>
<div class="paragraph">
<p>Check the contents of the tree file (with the hash <code>f6a65</code> as seen in the above image).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-5.jpg" alt="Contents of tree" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>It is surprising to note that the tree <code>f6a65</code> points to another tree <code>abecf</code>! The name of the new tree is <code>dir_1</code>.</p>
</div>
<div class="paragraph">
<p>Check the contents of the <code>dir_1</code> tree.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-6.jpg" alt="Contents of directory tree" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>So it points to the file (<code>master_dir_1_file_3.txt</code>) inside the directory <code>dir_1</code>.</p>
</div>
<div class="paragraph">
<p>Have a look at how the tree <code>f6a65</code> connected itself to the tree and blobs.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/tree-1.png" alt="Tree" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>The graph of the repository as it stands now</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/connection-graph-3.png" alt="Connection Graph" width="600" height="600">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
This graph can be created using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_renaming_files"><a class="anchor" href="#_renaming_files"></a>Renaming Files</h3>
<div class="paragraph">
<p>Rename <code>master_file_1.txt</code> to <code>the_master_file.txt</code> to see how Git handles it internally.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/mv-1.jpg" alt="Rename file" width="600" height="600">
</div>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/add-1.jpg" alt="Stage" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>When the file is committed, Git is smart enough to recognize that a file was renamed and is not a new file, as can be seen in the last line of the above image. It can recognize this because the SHA-1 hash of the file has not changed (as the content of the file has not changed).</p>
</div>
<div class="paragraph">
<p>Check the contents of the commit and tree files.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-7.jpg" alt="Contents of commit" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>From the last line, the hash <code>1a385</code> is same as the hash of the original file name (<code>master_file_1.txt</code>) and <strong>just the name of the file has been changed in the tree object instead of creating a new blob file.</strong> This is efficient space management by Git!</p>
</div>
<div class="paragraph">
<p>The structure of the repo.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/connection-graph-4.png" alt="Connection Graph" width="800" height="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
This graph can be created using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_modifying_large_files"><a class="anchor" href="#_modifying_large_files"></a>Modifying Large Files</h3>
<div class="paragraph">
<p>Add and commit a image to Git. The size of the image is 1.374 Mb (or 1374 kb), so it is a relatively huge file as compared to the other files (~ 1 kb/file).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/add-2.jpg" alt="Stage" width="600" height="600">
</div>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/cat-file-p-8.jpg" alt="Commit" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Make a small change to the image file contents and then add and commit it again.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/add-3.jpg" alt="Stage and commit" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>The SHA-1 hashes of <code>master_image_1.png</code> in the latest (<code>6d2d2</code>) and previous (<code>27666</code>) tree are different, so Git has created two different blobs (<code>ca893</code> and <code>1f7af</code>) for the same file, even when they only have a very small difference.</p>
</div>
<div class="paragraph">
<p>Run <code>du -c</code> now.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/du-c-3.jpg" alt="Du -c" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>From the image above, there are two directories (<code>.git/objects/1f</code> and <code>.git/objects/ca</code>) with the same size (1376 kb).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
The directory content size (1376 kb) is greater than the image size (1374 kb) as Git adds the file type and size (length) to the blob file and then hashes it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So is Git inefficient at handling huge files? No. The content of the file has changed and this produces a different SHA-1 hash (<code>1f7af</code>) than the original SHA-1 hash (<code>ca893</code>), so Git is not able to handle the change like it did when a file was simply renamed. Having multiple copies of such a huge file is not a problem in the local repository, but it will take up a lot of bandwidth while <a href="https://harshkapadia2.github.io/git_basics/#_git_push" target="_blank" rel="noopener">pushing</a> and <a href="https://harshkapadia2.github.io/git_basics/#_git_pull" target="_blank" rel="noopener">pulling</a> from a platform like <a href="https://harshkapadia2.github.io/git_basics/#_github" target="_blank" rel="noopener">GitHub</a>. To avoid this, Git uses <strong>Delta Compression</strong>. It stores the difference (diff) of the older file from the new one and indicates the new one as the parent. This is looked into in the sub-section below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_pack_directory"><a class="anchor" href="#_the_pack_directory"></a>The <code>pack</code> Directory</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">.git
├───...
└───objects
    ├───...
    └───pack
        ├───multi-pack-index
        ├───&lt;*.idx&gt;
        └───&lt;*.pack&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Delta compression</strong> is carried out every time a clone, push or pull is executed, or if Garbage Collection (<code>git gc</code>) is run.</p>
</div>
<div class="paragraph">
<p>Delta compression creates two types of files in <code>.git/objects/pack</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pack (<code>.pack</code>) file(s)</p>
</li>
<li>
<p>Index (<code>.idx</code>) file(s)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Multiple Packfiles can exist in one repo.</p>
</li>
<li>
<p>There is one Index file per Packfile.</p>
</li>
<li>
<p>The <a href="https://www.git-scm.com/docs/multi-pack-index" target="_blank" rel="noopener"><code>multi-pack-index</code> (MIDX) file</a> might also be created in extreme cases, but is not considered here.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The current state of the repo</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/du-c-3.jpg" alt="Du -c" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Note that the size of <code>.git/objects/pack</code> in the above image is 0 kb.</p>
</div>
<div class="paragraph">
<p>Garbage Collection (<code>git gc</code>) will be used to carry out Delta Compression and then <code>du -c</code> will be used to view the changes.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/du-c-4.jpg" alt="Du -c" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>Notice in the above image that the size of <code>.git/objects/pack</code> is now 1380 kb (from 0 kb) and a lot of the files in <code>.git/objects</code> have disappeared, except for <code>.git/objects/e6</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
The total size of the <code>.git</code> directory went down from 4220 kb (as seen in the first <code>du -c</code> image in this sub-section) to 2838 kb (as seen in the above image). This is a <strong>32.75% reduction in the size of the local repository</strong>!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The contents of <code>.git/objects/pack</code></p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/dir-2.jpg" alt="Content of directory" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>As mentioned above, two types of files (a pack <code>.pack</code> file and an index <code>.idx</code> file) are created in <code>.git/objects/pack</code>.</p>
</div>
<div class="paragraph">
<p>Check the contents of the Packfile using the plumbing command <code>git verify-pack -v path/to/pack/file/&lt;file_name&gt;.pack</code> (<code>-v</code> = verbose).</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/verify-pack-1.jpg" alt="Contents of files" width="600" height="600">
</div>
</div>
<div class="paragraph">
<p>From the above image, it can be understood that <strong>the Packfile contains all the Git objects</strong>. The Pack file is a file that contains all the Git Objects (along with their content) stored in it <a href="https://codewords.recurse.com/issues/three/unpacking-git-packfiles" target="_blank" rel="noopener">in a particular format</a>. All the objects stored in the Packfile are removed from the <code>.git/objects</code> directory.</p>
</div>
<div class="paragraph">
<p>From the above image, it can also be understood that the size of the newly modified image (hash <code>1f7af</code>) is very large in comparison to the original image (hash <code>ca893</code>). The blob of the original image (hash <code>ca893</code>) also has the hash of the modified image (<code>1f7af</code>) mentioned after it, indicating that its parent is the newly modified image file (hash <code>1f7af</code>). Thus <strong>Git stored the entire new file and only a diff/delta for the older file with a pointer to the newer file, rather than storing the entire file again, making it space efficient.</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
The newer file (hash <code>1f7af</code>) will usually be accessed more than the older one (hash <code>ca893</code>), so storing the entirety of the newer file and a delta/diff for the older one makes more sense than storing the entirety of the old file and a delta/diff for the new one. As the newer file will usually be accessed more, it would be inefficient to apply the delta/diff of the newer file to the entirety of the older file to generate the newer file every time. It is cheaper to apply the delta/diff of the older file to the entirety of the newer file, as the older file won&#8217;t be accessed as frequently.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The pack file has a graph in it just like <a href="#_dag">the Directed Acyclic Graph that the Commit, Tree and Blob objects form</a>.</p>
</li>
<li>
<p>The Index (<code>.idx</code>) file contains offsets into its corresponding Pack (<code>.pack</code>) file so that a specific object can be found quickly.</p>
</li>
<li>
<p><a href="https://codewords.recurse.com/issues/three/unpacking-git-packfiles#:~:text=each%20object%20begins.-,IDX%20files,-While%20it%E2%80%99s%20possible" target="_blank" rel="noopener">The Index (<code>.idx</code>) file has its own file structure.</a></p>
</li>
<li>
<p>Do not confuse these <code>.idx</code> Index files with <a href="#_the_index_file">the staging area <code>index</code> file</a>. They are not related.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On running aggressive Garbage Collection (<code>git gc --aggressive</code>), Git got rid of all the files in <code>.git/objects</code> <strong>that were referenced in a tree</strong> and added them to the Pack file. The <code>.git/objects/e6</code> directory did not get removed as it was not referenced (listed) in any <a href="#_the_tree_object">Tree Object</a>.</p>
</div>
<div class="paragraph">
<p>As mentioned at the start of this sub-section, these Packfiles and Index files are created every time a clone, push or pull is executed, or if Garbage Collection (<code>git gc</code>) is run. Why is this so? Network bandwidth and clone/push/pull command execution time are the main reasons. Applying Delta compression and putting in all objects into one file makes it simpler and faster to transfer data over the Network and also saves storage space (~32% space was saved through packing in this case).</p>
</div>
<div class="paragraph">
<p>Take a look at the log of the repository.</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/log-1.jpg" alt="Log of repository" width="600" height="600">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
Further reading on Packfiles can be found in the <a href="#_packfiles">Resources section</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_empty_commits"><a class="anchor" href="#_empty_commits"></a>Empty Commits</h3>
<div class="paragraph">
<p>The <a href="https://harshkapadia2.github.io/git_basics/#_allow_empty" target="_blank" rel="noopener"><code>--allow-empty</code> option in <code>git commit</code></a> allows creating commits without changes in any files.</p>
</div>
<div class="paragraph">
<p>As empty commits have no changes to any files, they always point to the <strong>latest</strong> <a href="#_the_tree_object">Tree Object</a> in the <a href="https://harshkapadia2.github.io/git_basics/#_branches" target="_blank" rel="noopener">branch</a>.</p>
</div>
<div class="paragraph">
<p>To illustrate this, set up a repo using the following commands</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ git init
$ touch file_1.txt
$ git add .
$ git commit -m "Add file_1.txt"
$ git commit --allow-empty -m "Empty commit #1"
$ git commit --allow-empty -m "Empty commit #2"

# Now run
$ git log --oneline --graph
* 208cead (HEAD -&gt; main) Empty commit #2
* 64cf914 Empty commit #1
* be0c1ec Add file_1.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>git cat-file -p &lt;hash&gt;</code> command as done in previous sub-sections to create the graph.</p>
</div>
<div class="paragraph">
<p>The graph of the above repository</p>
</div>
<div class="imageblock">
<div class="content">
<img loading="lazy" src="./static/img/connection-graph-5.png" alt="Connection Graph" width="600" height="600">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img loading="lazy" src="./static/img/admonition_icons/note.png" alt="Note">
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If the empty commit is the first commit in the repository (initial commit), then it will have its own empty Tree Object associated with it. In all other cases an empty commit will point to the latest Tree Object in the branch.</p>
</li>
<li>
<p>This graph can be created using <a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_talks"><a class="anchor" href="#_talks"></a>Talks</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://talks.harshkapadia.me/git_internals" target="_blank" rel="noopener">Git Internals by Harsh Kapadia</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=DjOk0jnqsLk" target="_blank" rel="noopener">Git for software engineers</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=yI0BtEzdGtw" target="_blank" rel="noopener">Rules To Git By</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=P6jD966jzlk" target="_blank" rel="noopener">Fear Not The SHA!</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tools"><a class="anchor" href="#_tools"></a>Tools</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://git-graph.harshkapadia.me" target="_blank" rel="noopener">Git Graph: Visualize Commit, Tree and Blob objects</a> (by Harsh Kapadia)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles"><a class="anchor" href="#_articles"></a>Articles</h3>
<div class="sect3">
<h4 id="_misc"><a class="anchor" href="#_misc"></a>Misc</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://tom.preston-werner.com/2009/05/19/the-git-parable.html" target="_blank" rel="noopener">The Git Parable</a></p>
</li>
<li>
<p><a href="https://git.wiki.kernel.org/index.php/Git" target="_blank" rel="noopener">Git Design Overview</a></p>
</li>
<li>
<p><a href="https://matthew-brett.github.io/curious-git" target="_blank" rel="noopener">Curious Git</a></p>
</li>
<li>
<p><a href="https://github.com/pluralsight/git-internals-pdf" target="_blank" rel="noopener">Git Internals PDF</a></p>
</li>
<li>
<p><a href="https://maryrosecook.com/blog/post/git-from-the-inside-out" target="_blank" rel="noopener">Git from the Inside Out</a></p>
</li>
<li>
<p><a href="https://jwiegley.github.io/git-from-the-bottom-up" target="_blank" rel="noopener">Git from the Bottom Up</a></p>
</li>
<li>
<p><a href="https://karngyan.com/blog/git-1337-edition-1" target="_blank" rel="noopener">git - 1337 edition - I</a> and <a href="https://karngyan.com/blog/git-1337-edition-2" target="_blank" rel="noopener">git - 1337 edition - II</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_the_staging_index_file"><a class="anchor" href="#_the_staging_index_file"></a>The Staging <code>index</code> File</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://mincong.io/2018/04/28/git-index" target="_blank" rel="noopener">Understanding the Index File.</a></p>
</li>
<li>
<p><a href="https://jwiegley.github.io/git-from-the-bottom-up/2-The-Index/1-meet-the-middle-man.html" target="_blank" rel="noopener">The Index: Meet the middle man</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packfiles"><a class="anchor" href="#_packfiles"></a>Packfiles</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://codewords.recurse.com/issues/three/unpacking-git-packfiles" target="_blank" rel="noopener">Unpacking Git Packfiles</a></p>
</li>
<li>
<p><a href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles" target="_blank" rel="noopener">Git Internals - Packfiles</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=cauIy20JhFs" target="_blank" rel="noopener">How To Unpack All Objects Of A Git Repository</a></p>
</li>
<li>
<p><a href="https://gist.github.com/matthewmccullough/2695758" target="_blank" rel="noopener">A Packfile example</a></p>
</li>
</ul>
</div>
<hr>
<div class="pwa-install-div hidden">
	<div id="pwa-install-text">Ready for offline use!</div>
	<button id="pwa-install-btn">Install</button>
	<button id="pwa-install-dismiss" aria-label="Dismiss PWA install prompt">
		<img loading="lazy" src="static/img/cross.svg" alt="X">
	</button>
</div>

<button class="btn hidden back-to-top-btn" aria-label="Scroll to top"><img loading="lazy" src="static/img/up-arrow.svg" alt="Top"></button>
</div>
</div>
</div>
</div>
</div>
<script src="./static/highlight/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<div id="footer">
	Created using&nbsp;
	<a
		href="https://harshkapadia2.github.io/asciidoctor-jet"
		target="_blank"
		rel="noreferrer"
		><i>Asciidoctor Jet</i></a
	>.
</div>
</body>
</html>